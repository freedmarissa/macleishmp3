---
title: "Markdown File"
author: "Marissa Freed, Natasha Rosenthal"
date: "3/26/2018"
output: 
  html_document:
    code_folding: hide
---
**make sure you `install.packages("macleish")` and `install.packages("leaflet")` before running code

http://download.massgis.digital.mass.gov/shapefiles/contours5k/hp337.zip

##Prompt: 
MacLeish currently has two campsites - one large group site closer to the building and one remote campsite with two tent platforms about one mile from the parking area. We would like to develop one additional campsite that is 
approximately 805 meters' walk from the parking area,

within 61 meters of a stream or other source of water, 

in forest that is unlike the forest in the two other campsites, relatively flat, and 

at least 152 meters from any research area or any element of the Challenge Course. 

Propose two new campsite locations for our consideration.


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(macleish)
library(leaflet)
library(sf)
proj4_aea <- "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"
```

```{r, eval = FALSE} 
url <- "http://download.massgis.digital.mass.gov/shapefiles/state/contours250k.zip"

local_file <- basename(url)

download.file(url, destfile = local_file)

unzip(local_file, exdir = "contours250k")

```

```{r}
macleish_landmarks <- macleish_layers[["landmarks"]]
macleish_trails <- macleish_layers[["trails"]]
macleish_streams <- macleish_layers[["streams"]]
macleish_forests <- macleish_layers[["forests"]]
macleish_courses <- macleish_layers[["challenge_courses"]]
macleish_boundary <- macleish_layers[["boundary"]]
contours <- read_sf("contours250k/CONTOURS250K_ARC.shp")
contours_4326 <- contours %>%
  st_transform(4326)

contours_4326
```

```{r}
macleish_buildings <- macleish_layers[["buildings"]]
```

```{r}
leaflet() %>%
  addTiles() %>%
  addPolylines(data = macleish_streams) %>%
  addPolygons(data = macleish_forests)
```

Data wrangling

```{r}
streams_buffer <- macleish_streams %>%
  st_transform(proj4_aea) %>%
  st_buffer(dist = 61) %>% 
  st_transform(4326)
sbuffers_inside <- streams_buffer %>%
  st_intersection(macleish_boundary)

challenge_buffer <- macleish_courses %>%
  st_transform(proj4_aea) %>%
  st_buffer(dist = 152) %>% 
  st_transform(4326)
cbuffers_inside <- challenge_buffer %>%
  st_intersection(macleish_boundary)

#cbuffers_outside we need to do a thing with this later but I needed to knit the doc so i added the #

allbuffers_inside <- sbuffers_inside %>%
  st_intersection(cbuffers_inside)


leaflet() %>%
  addTiles() %>%
  addPolylines(data = macleish_streams, 
               weight = 1, color = "brown") %>%
  addPolygons(data = allbuffers_inside)

  
```


  addPolygons(data = sbuffers_inside) %>%
  addPolygons(data = cbuffers_inside, weight = 1, color = "red")








